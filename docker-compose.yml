version: '3.8'

services:
  crawler:
    build:
      context: ./crawler
      dockerfile: Dockerfile
    volumes:
      - datalake:/data/datalake
    command: ["java", "-jar", "crawler.jar"]

  indexer:
    build:
      context: ./indexer
      dockerfile: Dockerfile
    volumes:
      - datalake:/data/datalake
      - datamart:/data/datamart
    command: ["java", "-jar", "indexer.jar"]

  query-engine:
    build:
      context: ./query-engine
      dockerfile: Dockerfile
    volumes:
      - metadata:/data/metadata
      - datamart:/data/datamart
    command: ["java", "-jar", "query-engine.jar"]

volumes:
  datalake:
  metadata:
  datamart:
